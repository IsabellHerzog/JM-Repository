<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>first js steps</title>
  <script type="text/javascript" src="three.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js"></script>


</head>

<body bgcolor= "black">

  <script type="text/javascript">

    var scene, camera, renderer, mesh, cube;
    var screenWith = window.innerWidth;
    var screenHeight = window.innerHeight;

    init();

    function init(){

      // * 01:scene/buehne * //
      scene = new THREE.Scene();

      // * 02:camera * //
      // camera= new Three.PerspectiveCamera(angle,width/height,near,far);
      camera = new THREE.PerspectiveCamera(4, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 75;
      camera.position.x = 50;
      camera.position.y = 50;
      camera.lookAt(scene.position);
      camera.updateMatrixWorld();


      // * 03:renderer * //
      renderer = new THREE.WebGLRenderer({antialias: true, alpha:true});
      // default value
      renderer.setClearColor( 0x000000, 0 );
      renderer.setSize(screenWith,screenHeight);
      document.body.appendChild(renderer.domElement);

      // * 04: light *//
      var lightDircet = new THREE.DirectionalLight( 0xffffff );
      lightDircet.position.set( 0, 1, 1 ).normalize();
      scene.add(lightDircet);

      var lightSpot = new THREE.SpotLight(0xFFFFFF);
      lightSpot.intensity = 0.5;
      lightSpot.penumbra = 0;
      lightSpot.decay = 1;
      lightSpot.distance = 200;
      lightSpot.position.set(0,-90,0);
      lightSpot.rotation.y= 90 * Math.PI / 180;
      scene.add(lightSpot);


      // // * 05:load texture * //
      var texture_rl = new THREE.TextureLoader().load('textures/wall_256x256.jpg');
      var texture_tb = new THREE.TextureLoader().load('textures/wall_4096x256.jpg');
      var createNormalMap_rl = new THREE.TextureLoader().load('textures/wall_normalMap_256x256.jpg');
      var createNormalMap_tb = new THREE.TextureLoader().load('textures/wall_normalMap_4096x256.jpg');

      // * 06:create mesh * //
      var geometry = new THREE.BoxGeometry(16,1,1);

      var material = new THREE.MeshDepthMaterial({
        opacity: 0.1,
        blending: THREE.NormalBlending,
        depthTest: true,

      });

      cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

    }

    // Options to be added to the GUI

    var options = {
      velx: 0,
      vely: 0,
      camera: {
        speed: 0.0001
      },
      stop: function() {
        this.velx = 0;
        this.vely = 0;
      },
      reset: function() {
        this.velx = 0.1;
        this.vely = 0.1;
        camera.position.z = 75;
        camera.position.x = 0;
        camera.position.y = 0;
        cube.scale.x = 1;
        cube.scale.y = 1;
        cube.scale.z = 1;
        cube.material.wireframe = true;
      }
    };

    // DAT.GUI Related Stuff

    var gui = new dat.GUI();

    var cam = gui.addFolder('Camera');
    cam.add(options.camera, 'speed', 0, 0.0010).listen();
    cam.add(camera.position, 'y', 0, 100).listen();
    cam.open();

    var velocity = gui.addFolder('Velocity');
    velocity.add(options, 'velx', -0.2, 0.2).name('X').listen();
    velocity.add(options, 'vely', -0.2, 0.2).name('Y').listen();
    velocity.open();

    var box = gui.addFolder('Cube');
    box.add(cube.scale, 'x', 0, 3).name('Width').listen();
    box.add(cube.scale, 'y', 0, 3).name('Height').listen();
    box.add(cube.scale, 'z', 0, 3).name('Length').listen();
    box.add(cube.material, 'wireframe').listen();
    box.open();

    gui.add(options, 'stop');
    gui.add(options, 'reset');

    // Rendering the animation

    var render = function() {

      requestAnimationFrame(render);

      var timer = Date.now() * options.camera.speed;
      camera.position.x = Math.cos(timer) * 100;
      camera.position.z = Math.sin(timer) * 100;
      camera.lookAt(scene.position);
      camera.updateMatrixWorld();

      cube.rotation.x += options.velx;
      cube.rotation.y += options.vely;

      renderer.render(scene, camera);

    };
    render();

  </script>

</body>
</html>
